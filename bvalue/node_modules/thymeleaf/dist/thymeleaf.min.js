var Thymeleaf=function(e){"use strict";function r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function s(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}class n{constructor(e,r,t){this.prefix=e,this.name=r,this.isomorphic=t}process(e,r,t,s){return e.removeAttribute(r),this.isomorphic&&e.removeAttribute(`${this.prefix}:${this.name}`),!1}}class o extends n{constructor(e,r){super(e,"attr",r)}process(e,r,t,s){return/(.+=.+,)*.+=.+/.test(t)?t.split(",").forEach(r=>{let[t,n]=r.split("="),o=s.expressionProcessor.process(n,s);var i;e.setAttribute(t,"string"!=typeof(i="string"==typeof o?o:JSON.stringify(o))?i:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"))}):"test"!==process.env.NODE_ENV&&console.warn(`Value to ${r}, ${t}, doesn't seem to contain an attribute assignment expression.  Ignoring.`),super.process(e,r,t,s)}}class i{constructor(e,r){this.prefix=e,this.name=r}process(e,r){return!1}}function a(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function l(e,r,t){return e.getAttribute(`${r}:${t}`)||e.getAttribute(`data-${r}-${t}`)}function c(e){return function(e){return(new DOMParser).parseFromString(e,"text/html")}(e)}function p(e){return function(e){if(e.nodeType===Node.DOCUMENT_NODE){var r="",t=e.contentType,s=e.docType,n=e.firstElementChild;return s?r+="<!DOCTYPE ".concat(s.name,">"):"HTML"!==n.tagName&&"text/html"!==t||(r+="<!DOCTYPE html>"),r+=n.outerHTML}return e.outerHTML}(e)}class u extends i{constructor(e){super(e,"block")}process(e,r){let t=e.parentElement;for(;e.firstChild;){let r=e.firstChild;t.insertBefore(r,e),1===r.nodeType&&e.__thymeleafLocalVariables&&(r.__thymeleafLocalVariables=s(s({},r.__thymeleafLocalVariables||{}),e.__thymeleafLocalVariables))}return t.removeChild(e),!0}}class m extends n{constructor(e,r){super(e,"checked",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?e.setAttribute("checked",""):e.removeAttribute("checked"),super.process(e,r,t,s)}}class f extends n{constructor(e,r){super(e,"classappend",r)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return n&&(e.className+=" "+n),super.process(e,r,t,s)}}class h extends n{constructor(e,r){super(e,"each",r)}process(e,r,t,s){super.process(e,r,t,s);let n=s.expressionProcessor.process(t,s);if(n){let{localValueName:r,iterable:t}=n,s=e.cloneNode(!0);for(let n of t){let t=s.cloneNode(!0);t.__thymeleafLocalVariables={[r]:n},e.parentElement.appendChild(t)}}return e.parentElement.removeChild(e),!0}}class d extends n{constructor(e,r,t){super(e,r,t)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return e.setAttribute(this.name,n?n.toString():""),super.process(e,r,t,s)}}const g=["datetime","href","src","style","value"],x="fragment";class w extends n{constructor(e,r){super(e,x,r)}}class b extends n{constructor(e,r){super(e,"if",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?super.process(e,r,t,s):(e.remove(),!0)}}var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var y=function(e,r,t){return e(t={path:r,exports:{},require:function(e,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==r&&t.path)}},t.exports),t.exports}((function(e){!function(r,t){if(e.exports)e.exports=t();else{var s=t();Object.keys(s).forEach((function(e){r[e]=s[e]}))}}(E,(function(){return{$:function(e,r){return(r||document).querySelector(e)},$$:function(e,r){return Array.prototype.slice.call((r||document).querySelectorAll(e))}}}))}));async function O(e,r,t){let{templateResolver:s}=t;if(s){let{templateName:t,fragmentName:n}=r,o=c(await s(t));return y.$(`[${e}\\:${x}^="${n}"]`,o)||y.$(`[data-${e}-${x}^="${n}"]`,o)}return console.log("No template resolver configured"),null}class C extends n{constructor(e,r){super(e,"insert",r)}async process(e,r,t,s){super.process(e,r,t,s),a(e);let n=s.expressionProcessor.process(t,s);if(n){let r=await O(this.prefix,n,s);if(r){let t=l(r,this.prefix,x),{parameterNames:o}=s.fragmentSignatureProcessor.process(t,s);if(o){let{parameters:e}=n,t={};o.forEach((r,s)=>{t[r]=e[r]||e[s]||null}),r.__thymeleafLocalVariables=t}return e.appendChild(r),!0}}return!1}}class N extends n{constructor(e,r,t){super(e,r,t)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return n?e.setAttribute(this.name,n.toString()):e.removeAttribute(this.name),super.process(e,r,t,s)}}const P=["alt","class"];class v extends n{constructor(e,r){super(e,"remove",r)}process(e,r,t,s){switch(super.process(e,r,t,s),t){case"all":return e.parentElement.removeChild(e),!0;case"all-but-first":for(;e.lastElementChild!==e.firstElementChild;)e.removeChild(e.lastElementChild);return!1}}}class L extends n{constructor(e,r){super(e,"replace",r)}async process(e,r,t,s){super.process(e,r,t,s),a(e);let n=s.expressionProcessor.process(t,s);if(n){let r=await O(this.prefix,n,s);if(r){let t=l(r,this.prefix,x),{parameterNames:o}=s.fragmentSignatureProcessor.process(t,s);if(o){let{parameters:e}=n,t={};o.forEach((r,s)=>{t[r]=e[r]||e[s]||null}),r.__thymeleafLocalVariables=t}return e.parentElement.insertBefore(r,e),e.remove(),!0}}return e.remove(),!1}}class k extends n{constructor(e,r){super(e,"text",r)}async process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return e.textContent="object"==typeof n?await async function(e,r){if(r){let{key:t,parameters:s}=e;return await r(t,s)||""}return console.log("No message resolver configured"),null}(n,s.messageResolver):n,super.process(e,r,t,s)}}class A extends n{constructor(e,r){super(e,"unless",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?(a(e),e.parentNode.removeChild(e),!0):super.process(e,r,t,s)}}class S extends n{constructor(e,r){super(e,"utext",r)}process(e,r,t,s){return e.innerHTML=s.expressionProcessor.process(t,s),super.process(e,r,t,s)}}class $ extends n{constructor(e,r){super(e,"with",r)}process(e,r,t,s){super.process(e,r,t,s);let n={};return s.expressionProcessor.process(t,s).forEach(({name:e,value:r})=>{n[e]=r}),e.__thymeleafLocalVariables=n,!0}}class T extends n{constructor(e,r){super("xmlns",e),this.isomorphic=r}process(e,r,t,s){return e.removeAttribute(r),this.isomorphic&&e.removeAttribute("xmlns:"+this.isomorphic.prefix),!1}}class R{constructor(e,r){this.name=e,this.prefix=r}get expressionObjects(){return null}get processors(){return null}}class V extends R{constructor(e="thjs",r){super("Standard",e),this.isomorphic=r}get processors(){let{prefix:e,isomorphic:r}=this;return[new C(e,r),new L(e,r),new h(e,r),new b(e,r),new A(e,r),new $(e,r),new o(e,r),new f(e,r),...g.map(t=>new d(e,t,r)),...P.map(t=>new N(e,t,r)),new m(e,r),new k(e,r),new S(e,r),new w(e,r),new v(e,r),new u(e),new T(e,r)]}}const _={dialects:[new V]},j=s(s({},_),{},{dialects:[new V("th",{prefix:"thjs"})]});class F{matches(e,r){let{isomorphic:t,name:s,prefix:o}=r;if(r instanceof n){let r=[o];t&&r.unshift(t.prefix);for(let t of r){let r;if(r=`${t}:${s}`,e.hasAttribute(r))return r;if(r=`data-${t}-${s}`,e.hasAttribute(r))return r}}else if(r instanceof i){let t=`${r.prefix}:${s}`;if(e.tagName===t.toUpperCase())return t}return null}}class I{constructor(e){r(this,"position",0),r(this,"positionStack",[]),this.input=e}clear(){if(void 0===this.positionStack.pop())throw new Error("Called clear() but no matching mark()")}exhausted(){return this.position===this.input.length}mark(){this.positionStack.push(this.position)}markAndClearOrReset(e){this.mark();let r=e();return null!==r?(this.clear(),r):(this.reset(),null)}read(e){let r=this.input.substring(this.position),t=r.match(/^\s+/);t&&(t=t[0],r=r.substring(t.length));let s=new RegExp(e.source).exec(r);if(s){let[e]=s;if(r.startsWith(e))return this.position+=e.length+(t?t.length:0),s}return null}reset(){let e=this.positionStack.pop();if(void 0===e)throw new Error("Called reset() but no matching mark()");this.position=e}}class D{constructor(e){r(this,"expressionStack",[]),this.grammar=e}parse(e){let r=new I(e),t=this.grammar.accept(r,this);if(null===t||!r.exhausted()){let r=`Failed to parse "${e}"`;if("production"===process.env.NODE_ENV)return console.error(r),null;throw new Error(r)}return t}parseWithExpression(e,r){if("string"==typeof r){let t=this.grammar.findRuleByName(r);return t?t.accept(e,this):null}if(r instanceof RegExp){let t=e.read(r);if(t)return t[0]}else if("function"==typeof r)return r(e,this);return null}trackExpression(e,r,t,s){let n=this.expressionStack.push({name:t,expression:"function"!=typeof r?r.toString():null,input:e.input.substring(e.position)}),o=s();return null!==o?o:(this.expressionStack.splice(n-1),null)}}class M{constructor(e){this.parser=new D(e)}process(e,r={}){let t=this.parser.parse(e);return null==t?void 0:t(s(s({},r),{},{expression:e}))}}const q=e=>(r,t)=>{let s=t.parseWithExpression(r,e);return null!==s&&r.exhausted()?s:null},W=e=>e;class U extends class{constructor(e,r,t=W){this.name=e,this.expression=r,this.matchProcessor=t}accept(e,r){let{expression:t,name:s}=this;return r.trackExpression(e,t,s,()=>{let s=r.parseWithExpression(e,t);return null!==s?this.matchProcessor(s):null})}}{constructor(e,r,t){super(e,r,t||(e=>(...r)=>"function"==typeof e?e.apply(null,r):e))}}class B{constructor(e,r,...t){this.name=e,this.rules=[].concat(r,t)}accept(e,r){return this.startingRule.accept(e,r)}findRuleByName(e){let r=this.rules.find(r=>r.name===e);if(!r)throw new Error(`Failed to find a rule named "${e}" in the grammar`);return r}get startingRule(){return this.rules[0]}}const H=e=>(r,t)=>r.markAndClearOrReset(()=>{let s=t.parseWithExpression(r,e);return null!==s?s:""}),z=e=>(r,t)=>r.markAndClearOrReset(()=>{let s=[];for(;;){let n=r.markAndClearOrReset(()=>t.parseWithExpression(r,e));if(!n)break;s.push(n)}return s.length>0?s:null}),K=(...e)=>(r,t)=>r.markAndClearOrReset(()=>{for(let s of e){let e=r.markAndClearOrReset(()=>t.parseWithExpression(r,s));if(null!==e)return e}return null}),Y=(...e)=>(r,t)=>r.markAndClearOrReset(()=>{let s=[];for(let n of e){let e=r.markAndClearOrReset(()=>t.parseWithExpression(r,n));if(null===e)return null;s.push(e)}return s}),Z=e=>(r,t)=>r.markAndClearOrReset(()=>{let s=[];for(;;){let n=r.markAndClearOrReset(()=>t.parseWithExpression(r,e));if(!n)break;s.push(n)}return s});function G(e){return e.reduce((function(e,r){return e.concat(Array.isArray(r)?G(r):r)}),[])}function J(e,r){return e.find((function(t,s){if(r(t))return e.splice(s,1),t}))}var Q=new B("Thymeleaf fragment signature",new U("ThymeleafFragmentSignatureRule",q("FragmentSignature")),new U("FragmentSignature",Y("FragmentName",H("FragmentParameters")),([e,r])=>t=>({fragmentName:e(t),parameterNames:r?r(t):null})),new U("FragmentName",/[\w-._]+/),new U("FragmentParameters",Y(/\(/,Z("FragmentParameterNames"),/\)/),([,[e]])=>r=>e(r)),new U("FragmentParameterNames",Y("Identifier",Z(Y(/,/,"Identifier"))),e=>r=>e?G(e).filter(e=>","!==e).map(e=>e(r)):[]),new U("Identifier",/[#a-zA-Z_][\w]*/));const X=new B("Thymeleaf Expression Language",new U("ThymeleafExpression",K(q("VariableExpression"),q("MessageExpression"),q("LinkExpression"),q("FragmentExpression"),q("Iteration"),q("StringConcatenation"),q("ScopedVariables"),q("Literal"),q("LogicalExpression"),q("IfThenCondition"),q("IfThenElseCondition"),q("TokenLiteral"),q("Nothing"))),new U("VariableExpression",Y(/\${/,"Chain",/\}/),([,e])=>r=>{let t=e(r);return null!=t?t:""}),new U("Chain",Y(H("Negation"),"ChainLink",Z(Y(/\./,"ChainLink"))),([e,...r])=>t=>{let s=G(r).filter(e=>"."!==e).reduce((e,r)=>null==e?e:r(e,t),t);return"function"==typeof e?!s:s}),new U("ChainLink",K("MethodCall","ArrayIndex","PropertyName","Literal")),new U("MessageExpression",Y(/#{/,"MessageKey",H(Y(/\(/,Y("Expression",Z(Y(/,/,"Expression"))),/\)/)),/}/),([,e,[,r]])=>t=>({type:"message",key:e(t),parameters:r?G(r).filter(e=>"function"==typeof e).map(e=>e(t)):null})),new U("MessageKey",/[\w.-]+/),new U("LinkExpression",(ee=/^@\{(.+?)(\(.+\))?\}$/,re=["Url","UrlParameters"],(e,r)=>e.markAndClearOrReset(()=>{let t=e.read(ee);if(t){let e=[t[0]];for(let s=1;s<t.length;s++){let n=t[s];if(void 0!==n){let t=r.parseWithExpression(new I(n),re[s-1]);if(null===t)return null;e.push(t)}}return e}return null})),([,e,r])=>t=>{let s=e(t);if(r){let e=new M(X),n=r(t).slice(1,-1).split(",").map(r=>{let[s,n]=r.split("=");return[s,e.process(n,t)]});for(;;){let e=/(.*?)\{(.+?)\}(.*)/.exec(s);if(!e)break;{let[,r,t,o]=e,i=J(n,([e])=>e===t);i&&(s=`${r}${i[1]}${o}`)}}n.length&&(s+="?"+n.map(([e,r])=>`${e}=${r}`).join("&"))}return s}),new U("Url",/.+/),new U("UrlParameters",/\((.+)\)/),new U("FragmentExpression",Y(/~{/,"TemplateName",/::/,"FragmentName",H("FragmentParametersSection"),/}/),([,e,,r,t])=>s=>({type:"fragment",templateName:e(s),fragmentName:r(s),parameters:t?t(s):null})),new U("TemplateName",K(/[\w-._/]+/,"VariableExpression")),new U("FragmentName",/[\w-._]+/),new U("FragmentParametersSection",Y(/\(/,H("FragmentParameters"),/\)/),([,e])=>r=>e(r)),new U("FragmentParameters",Y("Expression",Z(Y(/,/,"Expression"))),e=>r=>e?G(e).filter(e=>","!==e).map(e=>e(r)):[]),new U("Iteration",Y("Identifier",H(Y(/,/,"Identifier")),/:/,"VariableExpression"),([e,[,r],,t])=>s=>({type:"iteration",localValueName:e(s),iterable:t(s),iterationStatusVariable:r?r(s):null})),new U("ScopedVariables",Y("ScopedVariable",Z(Y(/,/,"ScopedVariable"))),e=>r=>G(e).map(e=>e(r))),new U("ScopedVariable",Y("Identifier",/=/,"Expression"),([e,,r])=>t=>({name:e(t),value:r(t)})),new U("Literal",K("StringLiteral","NumberLiteral","BooleanLiteral","NullLiteral")),new U("StringLiteral",/'.*?(?!\\').'/,e=>()=>e.slice(1,-1).replace(/\\/g,"")),new U("NumberLiteral",/\d+(\.\d+)?/,e=>()=>parseFloat(e)),new U("BooleanLiteral",/(true|false)/,e=>()=>"true"===e),new U("NullLiteral",/null/,()=>()=>null),new U("TokenLiteral",/[^: ${}]+/,e=>()=>e),new U("StringConcatenation",Y("Concatenatable",z(Y(/\+/,"Concatenatable"))),e=>r=>G(e).filter(e=>"+"!==e).reduce((e,t)=>e+("function"==typeof t?t(r):t),"")),new U("Concatenatable",K("StringLiteral","VariableExpression")),new U("LiteralSubstitution",Y(/^\|/,z(Y(/[^$|]*/,"VariableExpression",/[^$|]*/)),/\|$/),([,e])=>r=>G(e).reduce((e,t)=>"string"==typeof t?e+t:e+t(r),"")),new U("LogicalOperation",K("LogicalAndOperation","LogicalOrOperation")),new U("LogicalAndOperation",Y("Expression","LogicalAndOperator","Expression"),([e,,r])=>t=>{let s=e(t),n=r(t);return s&&n}),new U("LogicalAndOperator",K(/&&/,/and/)),new U("LogicalOrOperation",Y("Expression","LogicalOrOperator","Expression"),([e,,r])=>t=>{let s=e(t),n=r(t);return s||n}),new U("LogicalOrOperator",K(/\|\|/,/or/)),new U("Negation",/!/),new U("EqualityOperation",Y("Expression","EqualityOperator","Expression"),([e,r,t])=>s=>{let n=e(s),o=t(s);switch(r(s)){case"==":return n==o;case"eq":case"===":return n===o;case"!=":return n!=o;case"ne":case"!==":return n!==o}return!1}),new U("EqualityOperator",K(/[=!]==?/,/eq/,/ne/)),new U("LogicalExpression",K("EqualityOperation","LogicalOperation","Expression")),new U("IfThenCondition",Y("LogicalExpression",/\?/,"Expression"),([e,,r])=>t=>e(t)?r(t):void 0),new U("IfThenElseCondition",Y("LogicalExpression",/\?/,"Expression",/:/,"Expression"),([e,,r,,t])=>s=>e(s)?r(s):t(s)),new U("Nothing",/^$/),new U("Identifier",/[#a-zA-Z_][\w]*/),new U("PropertyName","Identifier",e=>r=>{let t=e(r);return Object.prototype.hasOwnProperty.call(r,t)?r[t]:""}),new U("ArrayIndex",/([\w]+)?(\[[\d]*])+/,e=>r=>function(e,r){const t=function(e){return e.split(".").reduce((e,r)=>e.concat(r.replace(/["']/g,"").split("[").filter(e=>""!==e).map(e=>e.replace("]",""))),[])}(r);let n=Array.isArray(e)?[...e]:s({},e);for(let e=0;e<t.length;e++)try{if(void 0===n[t[e]]){n=null;break}n=n[t[e]]}catch(e){n=null;break}return n}(r,e)),new U("MethodCall",Y("MethodName",/\(/,H("MethodParameters"),/\)/),([e,,r])=>(t,s)=>{let n=e(t),o=t[n];return o?o.apply(t,r(s||t)):(console.warn(`No method '${n}' present on the current context.  Expression: ${t.expression}`),"")}),new U("MethodName","Identifier"),new U("MethodParameters",Y("Chain",Z(Y(/,/,"Chain"))),e=>r=>e?G(e).filter(e=>","!==e).map(e=>e(r)):[]),new U("Expression",K("LiteralSubstitution","VariableExpression","StringConcatenation","Literal")));var ee,re;return e.AttributeProcessor=n,e.Dialect=R,e.ElementProcessor=i,e.ExpressionProcessor=M,e.STANDARD_CONFIGURATION=j,e.StandardDialect=V,e.TemplateEngine=class{constructor({dialects:e,messageResolver:r,templateResolver:t}=_){this.messageResolver=r,this.templateResolver=t,this.expressionProcessor=new M(X),this.fragmentSignatureProcessor=new M(Q),this.processors=e.reduce((e,{processors:r})=>r?[...e,...r]:e,[]),this.expressionObjects=e.reduce((e,{expressionObjects:r})=>r?s(s({},e),r):e,{})}process(e,r={}){let t=c(e),n=t.firstElementChild;return this.processNode(n,s(s(s({},r),this.expressionObjects),{},{expressionProcessor:this.expressionProcessor,fragmentSignatureProcessor:this.fragmentSignatureProcessor,messageResolver:this.messageResolver,templateResolver:this.templateResolver})).then(()=>p(t))}processFile(e,r={}){return Promise.reject(new Error("Cannot use TemplateEngine.processFile() inside a browser"))}async processNode(e,r={}){let t=e.__thymeleafLocalVariables||{},o=s(s({},r),t),a=new F;for(let r=0;r<this.processors.length;r++){let t=this.processors[r],s=!1,l=a.matches(e,t);if(l&&(t instanceof n?s=await t.process(e,l,e.getAttribute(l),o):t instanceof i&&(s=await t.process(e,o))),s)return!0}for(let r=0;r<e.children.length;){let t=e.children[r];await this.processNode(t,o)||r++}}},e.ThymeleafExpressionLanguage=X,e}({});
//# sourceMappingURL=thymeleaf.min.js.map
